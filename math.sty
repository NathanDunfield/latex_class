\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{nmd/math}[2014/08/31 - Semester start edition]
\RequirePackage{nmd/fonts}

%%% Marking future tasks. 

\newcommand{\todo}[1]{\textcolor{red}{\emph{#1}}}

% The following allows hyphenation in the word 3-manifold, but not
% on the hyphen itself

\newcommand{\hyp}{\nobreakdash-\hspace{0pt}}
\newcommand{\3}[1]{3\hyp}
\let\2\undefined
\newcommand{\2}[1]{2\hyp}
\let\1\undefined
\newcommand{\1}[1]{1\hyp}

%%% Standard Math commands

%%% Black Board Bold Letters.
% The first four are included in the G&T style. 
\providecommand{\Q}{{\mathbb Q}}
\providecommand{\R}{{\mathbb R}}
\providecommand{\C}{{\mathbb C}}
\providecommand{\Z}{{\mathbb Z}}
\newcommand{\T}{{\mathbb T}}
\newcommand{\E}{{\mathbb E}}
\newcommand{\F}{{\mathbb F}}
\newcommand{\N}{{\mathbb N}}
\renewcommand{\H}{{\mathbb{H}}}
\newcommand{\CH}{{\mathbb{CH}}}
\newcommand{\RH}{{\mathbb{RH}}}

%% Calligraphic letters

\newcommand{\cA}{{\mathcal A}}
\newcommand{\cB}{{\mathcal B}}
\newcommand{\cC}{{\mathcal C}}
\newcommand{\cD}{{\mathcal D}}
\newcommand{\cE}{{\mathcal E}}
\newcommand{\cF}{{\mathcal F}}
\newcommand{\cG}{{\mathcal G}}
\newcommand{\cH}{{\mathcal H}}
\newcommand{\cI}{{\mathcal I}}
\newcommand{\cJ}{{\mathcal J}}
\newcommand{\cK}{{\mathcal K}}
\newcommand{\cL}{{\mathcal L}}
\newcommand{\cM}{{\mathcal M}}
\newcommand{\cN}{{\mathcal N}}
\newcommand{\cO}{{\mathcal O}}
\newcommand{\cP}{{\mathcal P}}
\newcommand{\cQ}{{\mathcal Q}}
\newcommand{\cR}{{\mathcal R}}
\newcommand{\cS}{{\mathcal S}}
\newcommand{\cT}{{\mathcal T}}
\newcommand{\cU}{{\mathcal U}}
\newcommand{\cV}{{\mathcal V}}
\newcommand{\cW}{{\mathcal W}}
\newcommand{\cX}{{\mathcal X}}
\newcommand{\cY}{{\mathcal Y}}
\newcommand{\cZ}{{\mathcal Z}}

%% macros for things

\newcommand{\maps}{\colon\thinspace}
\newcommand{\SL}[2]{\mathrm{ SL}_{#1} #2}
\newcommand{\PSL}[2]{\mathrm{PSL}_{#1} #2}
\newcommand{\GL}[2]{\mathrm{GL}_{#1} #2}
\newcommand{\PGL}[2]{\mathrm{PGL}_{#1} #2}
\newcommand{\SU}{\mathrm{SU}}
\newcommand{\SO}{\mathrm{SO}}
\newcommand{\RP}{{{\mathbb{R}}\,\mathrm{P}}}
\newcommand{\CP}{{{\mathbb{C}}\,\mathrm{P}}}
\ifnmd@lucida
   \renewcommand{\RP}{{{\mathbb{R}}\mathrm{P}}}
   \renewcommand{\CP}{{{\mathbb{C}}\mathrm{P}}}
\fi
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Out}{Out}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\vol}{vol}
\DeclareMathOperator{\Vol}{Vol}
\DeclareMathOperator{\Area}{Area}
\DeclareMathOperator{\Isom}{Isom}
\DeclareMathOperator{\Teich}{Teich}
\DeclareMathOperator{\Homeo}{Homeo}
\DeclareMathOperator{\inj}{inj}

% Opinions vary
\DeclareMathOperator{\arccosh}{arccosh}
\DeclareMathOperator{\arcsinh}{arcsinh}
\DeclareMathOperator{\arctanh}{arctanh}
\DeclareMathOperator{\arcsech}{arcsech}
\DeclareMathOperator{\arccsch}{arccsch}
\DeclareMathOperator{\arccoth}{arccoth}

\newcommand{\bdry}{\partial}
\newcommand{\PML}{\mathcal{P \!\!\! M \! L}}
\newcommand{\PMF}{\mathcal{P \! \!M \!F}}
\newcommand{\MCG}{\mathcal{M \! CG}}
\ifnmd@lucida \renewcommand{\MCG}{\mathcal{M \kern-0.03em  C \kern-0.055em G}} \fi
\newcommand{\Tor}{\mathcal{T} \!\!\!\! \mathit{or}}
\newcommand{\norm}[1]{{\left\| #1 \right\|}}
\newcommand{\abs}[1]{{\left| #1 \right|}}
\newcommand{\pair}[1]{\left\langle #1 \right\rangle}
\newcommand{\somethingdef}[4]{{\left#1 {#2} \ \left| \ {#3} \vphantom{#2} \right. \right#4}}
\newcommand{\somethingdefm}[5]{{  #1#2  {#3}  \ #1 | \   {#4}  #1#5 }}

\newcommand{\setdef}[2]{\somethingdef{\{}{#1}{#2}{\}}}
\newcommand{\spandef}[2]{\somethingdef{\langle}{#1}{#2}{\rangle}}
\newcommand{\setdefm}[3]{\somethingdefm{#1}{\{}{#2}{#3}{\}}}
\newcommand{\spandefm}[3]{\somethingdefm{#1}{\langle}{#2}{#3}{\rangle}}

\newcommand{\mysmallmatrix}[4]{\left(\begin{smallmatrix}
        \scriptstyle #1 & \scriptstyle #2  \\ \scriptstyle #3 &
        \scriptstyle #4
        \end{smallmatrix}\right)
}
\newcommand{\twobytwomatrix}[4]{\left(\begin{array}{cc}
        #1 & #2  \\  #3 & #4
        \end{array}\right)
}
\newcommand{\mtext}[1]{\quad \mbox{#1} \quad}


% The ":=" operator, customized for the various fonts.  
\newcommand{\makeassignmacro}[2]{\hspace{#1}\raisebox{#2}{\ensuremath{:}}\hspace{-#1}=}
\newcommand{\assign}{:=}
\ifnmd@utopia \renewcommand{\assign}{\makeassignmacro{0.45ex}{0.095ex}} \fi
\ifnmd@times \renewcommand{\assign}{\makeassignmacro{0.5ex}{0.06ex}} \fi
\ifnmd@lucida \renewcommand{\assign}{\makeassignmacro{0.6ex}{0.046ex}} \fi
\ifnmd@computermodern \renewcommand{\assign}{\makeassignmacro{0.6ex}{0.085ex}} \fi

% Better overlines and tildes.  Example of useage
% \newcommand{\barN}{\kernoverline{4}{N}{1}} 
% here first number shifts the overline to the right and the second
% number shortens it somewhat.

\newcommand{\kernoverline}[3]{{\mkern #1mu\overline{\mkern-#1mu #2\mkern-#3mu}\mkern#3mu}}
\newcommand{\kerntilde}[3]{{\mkern #1mu\widetilde{\mkern-#1mu #2\mkern-#3mu}\mkern#3mu}}
\newcommand{\kernhat}[3]{{\mkern #1mu\widehat{\mkern-#1mu #2\mkern-#3mu}\mkern#3mu}}

\newcommand{\doublequom}[5]{{\raisebox{-#4}{$#1$}}#5\backslash {\raisebox{#4}{$#2$}}#5 / {\raisebox{-#4}{$#3$}}}
\newcommand{\doublequo}[3]{\doublequom{#1}{#2}{#3}{4pt}{\big}}
% other quotient constructions
\newcommand{\rightquom}[4]{{\raisebox{#3}{$#1$}}#4/ {\raisebox{-#3}{$#2$}}}
\newcommand{\leftquom}[4]{{\raisebox{-#3}{$#1$}}#4\backslash{\raisebox{#3}{$#2$}
}}
\newcommand{\doublerightquom}[4]{{\raisebox{#3}{$#1$}}#4/ \! \, \! #4/ {\raisebox{-#3}{$#2$}}}


% heegaard floer stuff

\newcommand{\HFhat}{\kernhat{2}{\mathit{HF}\vphantom{\raisebox{0.25pt}{$\mathit{HF}$}}}{-2}}
\newcommand{\HomeoR}{\Homeo^+\!(\R)}
\newcommand{\tilPSLTwoR}{\kerntilde{0}{\PSL{2}{\R}}{0}}


% CSisms:

\renewcommand{\P}{\mathbf{P}}
\newcommand{\NP}{\mathbf{NP}}
\newcommand{\coNP}{\mbox{\textbf{co-NP}}}


% Standard overlines

\newcommand{\Abar}{{\kernoverline{5.5}{A}{0}}}
\newcommand{\Bbar}{{\kernoverline{2.5}{B}{1}}}
\newcommand{\Cbar}{{\kernoverline{3.5}{C}{0}}}
\newcommand{\Dbar}{{\kernoverline{2.5}{D}{1.5}}}
\newcommand{\Ebar}{{\kernoverline{3.0}{E}{0}}}
\newcommand{\Fbar}{{\kernoverline{3}{F}{-1}}}
\newcommand{\Gbar}{{\kernoverline{2.5}{G}{0}}}
\newcommand{\Hbar}{{\kernoverline{5}{H}{0}}}
\newcommand{\Ibar}{{\kernoverline{3.5}{I}{-1}}}
\newcommand{\Jbar}{{\kernoverline{4.0}{J}{-2}}}
\newcommand{\Kbar}{{\kernoverline{3.5}{K}{1}}}
\newcommand{\Lbar}{{\kernoverline{2.5}{L}{1}}}
\newcommand{\Mbar}{{\kernoverline{4.5}{M}{0}}}
\newcommand{\Nbar}{{\kernoverline{4.0}{N}{0}}}
\newcommand{\Obar}{{\kernoverline{2.5}{O}{0}}}
\newcommand{\Pbar}{{\kernoverline{3}{P}{0.5}}}
\newcommand{\Qbar}{{\kernoverline{2.5}{Q}{0}}}
\newcommand{\Rbar}{{\kernoverline{3.5}{R}{0}}}
\newcommand{\Sbar}{{\kernoverline{2.5}{S}{-1}}}
\newcommand{\Tbar}{{\kernoverline{2.5}{T}{0}}}
\newcommand{\Ubar}{{\kernoverline{2.5}{U}{0}}}
\newcommand{\Vbar}{{\kernoverline{2.5}{V}{0}}}
\newcommand{\Wbar}{{\kernoverline{2.5}{W}{1}}}
\newcommand{\Xbar}{{\kernoverline{2.5}{X}{0}}}
\newcommand{\Ybar}{{\kernoverline{2.5}{Y}{0.5}}}
\newcommand{\Zbar}{{\kernoverline{3.5}{Z}{0}}}

\newcommand{\abar}{{\kernoverline{2.5}{a}{0}}}
\newcommand{\bbar}{{\kernoverline{2.5}{b}{-0.5}}}
\newcommand{\cbar}{{\kernoverline{2.5}{c}{0}}}
\newcommand{\dbar}{{\kernoverline{2.5}{d}{0}}}
\newcommand{\ebar}{{\kernoverline{2.5}{e}{0}}}
\newcommand{\fbar}{{\kernoverline{2.5}{f}{0}}}
\newcommand{\gbar}{{\kernoverline{2.5}{g}{0}}}
\newcommand{\hhbar}{{\kernoverline{2.5}{h}{0}}}
\newcommand{\ibar}{{\kernoverline{2.5}{i}{0}}}
\newcommand{\jbar}{{\kernoverline{4}{j}{-1}}}
\newcommand{\kbar}{{\kernoverline{2.5}{k}{0}}}
\newcommand{\lbar}{{\kernoverline{2.5}{l}{0}}}
\newcommand{\mbar}{{\kernoverline{2.5}{m}{0}}}
\newcommand{\nbar}{{\kernoverline{2.5}{n}{0}}}
\newcommand{\obar}{{\kernoverline{2.5}{o}{0}}}
\newcommand{\pbar}{{\kernoverline{2.5}{p}{0}}}
\newcommand{\qbar}{{\kernoverline{2.5}{q}{0}}}
\newcommand{\rbar}{{\kernoverline{2.5}{r}{0}}}
\newcommand{\sbar}{{\kernoverline{2.0}{s}{0}}}
\newcommand{\tbar}{{\kernoverline{2.5}{t}{0}}}
\newcommand{\ubar}{{\kernoverline{2.5}{u}{0}}}
\newcommand{\vbar}{{\kernoverline{2.5}{v}{0}}}
\newcommand{\wbar}{{\kernoverline{2.5}{w}{0}}}
\newcommand{\xbar}{{\kernoverline{2.5}{x}{0}}}
\newcommand{\ybar}{{\kernoverline{2.5}{y}{0}}}
\newcommand{\zbar}{{\kernoverline{2.5}{z}{0}}}

\newcommand{\alphabar}{{\kernoverline{2.5}{\alpha}{0}}}
\newcommand{\betabar}{{\kernoverline{2.5}{\beta}{0}}}
\newcommand{\gammabar}{{\kernoverline{2.5}{\gamma}{0}}}
\newcommand{\deltabar}{{\kernoverline{2.5}{\delta}{0}}}
\newcommand{\epsilonbar}{{\kernoverline{2.5}{\epsilon}{0}}}
\newcommand{\zetabar}{{\kernoverline{2.5}{\zeta}{0}}}
\newcommand{\etabar}{{\kernoverline{2.5}{\eta}{0}}}
\newcommand{\thetabar}{{\kernoverline{2.5}{\theta}{0}}}
\newcommand{\iotabar}{{\kernoverline{2.5}{\iota}{0}}}
\newcommand{\kappabar}{{\kernoverline{2.5}{\kappa}{0}}}
\newcommand{\lambdabar}{{\kernoverline{2.5}{\lambda}{0}}}
\newcommand{\mubar}{{\kernoverline{2.5}{\mu}{0}}}
\newcommand{\nubar}{{\kernoverline{2.5}{\nu}{0}}}
\newcommand{\xibar}{{\kernoverline{2.5}{\xi}{0}}}
\newcommand{\pibar}{{\kernoverline{2.5}{\pi}{0}}}
\newcommand{\rhobar}{{\kernoverline{2.5}{\rho}{0}}}
\newcommand{\sigmabar}{{\kernoverline{2.5}{\sigma}{0}}}
\newcommand{\taubar}{{\kernoverline{2.5}{\tau}{0}}}
\newcommand{\upsilonbar}{{\kernoverline{2.5}{\upsilon}{0}}}
\newcommand{\phibar}{{\kernoverline{2.5}{\phi}{0}}}
\newcommand{\chibar}{{\kernoverline{2.5}{\chi}{0}}}
\newcommand{\psibar}{{\kernoverline{2.5}{\psi}{0}}}
\newcommand{\omegabar}{{\kernoverline{2.5}{\omega}{0}}}
\newcommand{\Gammabar}{{\kernoverline{2.5}{\Gamma}{0}}}
\newcommand{\Deltabar}{{\kernoverline{2.5}{\Delta}{0}}}
\newcommand{\Thetabar}{{\kernoverline{2.5}{\Theta}{0}}}
\newcommand{\Lambdabar}{{\kernoverline{2.5}{\Lambda}{0}}}
\newcommand{\Xibar}{{\kernoverline{2.5}{\Xi}{0}}}
\newcommand{\Upsilonbar}{{\kernoverline{2.5}{\Upsilon}{0}}}
\newcommand{\Phibar}{{\kernoverline{2.5}{\Phi}{0}}}
\newcommand{\Psibar}{{\kernoverline{2.5}{\Psi}{0}}}
\newcommand{\Omegabar}{{\kernoverline{2.5}{\Omega}{0}}}

% Tildes 

\newcommand{\Atil}{{\kerntilde{5.5}{A}{0}}}
\newcommand{\Btil}{{\kerntilde{2.5}{B}{-1}}}
\newcommand{\Ctil}{{\kerntilde{2.5}{C}{-1}}}
\newcommand{\Dtil}{{\kerntilde{1.5}{D}{-2}}}
\newcommand{\Etil}{{\kerntilde{4}{E}{0}}}
\newcommand{\Ftil}{{\kerntilde{3.5}{F}{-1}}}
\newcommand{\Gtil}{{\kerntilde{1.5}{G}{-1.5}}}
\newcommand{\Htil}{{\kerntilde{5}{H}{0}}}
\newcommand{\Itil}{{\kerntilde{3.5}{I}{-1}}}
\newcommand{\Jtil}{{\kerntilde{4.0}{J}{-2}}}
\newcommand{\Ktil}{{\kerntilde{3.5}{K}{1}}}
\newcommand{\Ltil}{{\kerntilde{4}{L}{2}}}
\newcommand{\Mtil}{{\kerntilde{2}{M}{-1}}}
\newcommand{\Ntil}{{\kerntilde{4.0}{N}{0}}}
\newcommand{\Otil}{{\kerntilde{2.5}{O}{0}}}
\newcommand{\Ptil}{{\kerntilde{3}{P}{0.5}}}
\newcommand{\Qtil}{{\kerntilde{2.5}{Q}{0}}}
\newcommand{\Rtil}{{\kerntilde{3.5}{R}{0}}}
\newcommand{\Stil}{{\kerntilde{2.5}{S}{-1}}}
\newcommand{\Ttil}{{\kerntilde{2.5}{T}{0}}}
\newcommand{\Util}{{\kerntilde{2.5}{U}{0}}}
\newcommand{\Vtil}{{\kerntilde{2.5}{V}{0}}}
\newcommand{\Wtil}{{\kerntilde{2.5}{W}{1}}}
\newcommand{\Xtil}{{\kerntilde{2.5}{X}{0}}}
\newcommand{\Ytil}{{\kerntilde{2.5}{Y}{0.5}}}
\newcommand{\Ztil}{{\kerntilde{3.5}{Z}{0}}}

\newcommand{\atil}{{\kerntilde{2.5}{a}{0}}}
\newcommand{\btil}{{\kerntilde{2.5}{b}{-0.5}}}
\newcommand{\ctil}{{\kerntilde{2.5}{c}{0}}}
\newcommand{\dtil}{{\kerntilde{2.5}{d}{0}}}
\newcommand{\etil}{{\kerntilde{2.5}{e}{0}}}
\newcommand{\ftil}{{\kerntilde{2.5}{f}{0}}}
\newcommand{\gtil}{{\kerntilde{2.5}{g}{0}}}
\newcommand{\htil}{{\kerntilde{2.5}{h}{0}}}
\newcommand{\itil}{{\kerntilde{2.5}{i}{0}}}
\newcommand{\jtil}{{\kerntilde{4}{j}{-1}}}
\newcommand{\ktil}{{\kerntilde{2.5}{k}{0}}}
\newcommand{\ltil}{{\kerntilde{2.5}{l}{0}}}
\newcommand{\mtil}{{\kerntilde{2.5}{m}{0}}}
\newcommand{\ntil}{{\kerntilde{2.5}{n}{0}}}
\newcommand{\otil}{{\kerntilde{2.5}{o}{0}}}
\newcommand{\ptil}{{\kerntilde{2.5}{p}{0}}}
\newcommand{\qtil}{{\kerntilde{2.5}{q}{0}}}
\newcommand{\rtil}{{\kerntilde{2.5}{r}{0}}}
\newcommand{\stil}{{\kerntilde{2.0}{s}{0}}}
\newcommand{\ttil}{{\kerntilde{2.5}{t}{0}}}
\newcommand{\util}{{\kerntilde{2.5}{u}{0}}}
\newcommand{\vtil}{{\kerntilde{2.5}{v}{0}}}
\newcommand{\wtil}{{\kerntilde{2.5}{w}{0}}}
\newcommand{\xtil}{{\kerntilde{2.5}{x}{0}}}
\newcommand{\ytil}{{\kerntilde{2.5}{y}{0}}}
\newcommand{\ztil}{{\kerntilde{2.5}{z}{0}}}

\newcommand{\alphatil}{{\kerntilde{2.5}{\alpha}{0}}}
\newcommand{\betatil}{{\kerntilde{2.5}{\beta}{0}}}
\newcommand{\gammatil}{{\kerntilde{2.5}{\gamma}{0}}}
\newcommand{\deltatil}{{\kerntilde{2.5}{\delta}{0}}}
\newcommand{\epsilontil}{{\kerntilde{2.5}{\epsilon}{0}}}
\newcommand{\zetatil}{{\kerntilde{2.5}{\zeta}{0}}}
\newcommand{\etatil}{{\kerntilde{2.5}{\eta}{0}}}
\newcommand{\thetatil}{{\kerntilde{2.5}{\theta}{0}}}
\newcommand{\iotatil}{{\kerntilde{2.5}{\iota}{0}}}
\newcommand{\kappatil}{{\kerntilde{2.5}{\kappa}{0}}}
\newcommand{\lambdatil}{{\kerntilde{2.5}{\lambda}{0}}}
\newcommand{\mutil}{{\kerntilde{2.5}{\mu}{0}}}
\newcommand{\nutil}{{\kerntilde{2.5}{\nu}{0}}}
\newcommand{\xitil}{{\kerntilde{2.5}{\xi}{0}}}
\newcommand{\pitil}{{\kerntilde{2.5}{\pi}{0}}}
\newcommand{\rhotil}{{\kerntilde{2.5}{\rho}{0}}}
\newcommand{\sigmatil}{{\kerntilde{2.5}{\sigma}{0}}}
\newcommand{\tautil}{{\kerntilde{2.5}{\tau}{0}}}
\newcommand{\upsilontil}{{\kerntilde{2.5}{\upsilon}{0}}}
\newcommand{\phitil}{{\kerntilde{2.5}{\phi}{0}}}
\newcommand{\chitil}{{\kerntilde{2.5}{\chi}{0}}}
\newcommand{\psitil}{{\kerntilde{2.5}{\psi}{0}}}
\newcommand{\omegatil}{{\kerntilde{2.5}{\omega}{0}}}
\newcommand{\Gammatil}{{\kerntilde{2.5}{\Gamma}{0}}}
\newcommand{\Deltatil}{{\kerntilde{2.5}{\Delta}{0}}}
\newcommand{\Thetatil}{{\kerntilde{2.5}{\Theta}{0}}}
\newcommand{\Lambdatil}{{\kerntilde{2.5}{\Lambda}{0}}}
\newcommand{\Xitil}{{\kerntilde{2.5}{\Xi}{0}}}
\newcommand{\Upsilontil}{{\kerntilde{2.5}{\Upsilon}{0}}}
\newcommand{\Phitil}{{\kerntilde{2.5}{\Phi}{0}}}
\newcommand{\Psitil}{{\kerntilde{2.5}{\Psi}{0}}}
\newcommand{\Omegatil}{{\kerntilde{2.5}{\Omega}{0}}}


% Old style
\newcommand{\tilM}{\kerntilde{2}{M}{-1}}
\newcommand{\tilF}{\kerntilde{2.5}{F}{-1}}
\newcommand{\tilS}{\kerntilde{2.5}{S}{0}}
\newcommand{\tilX}{\kerntilde{2.5}{X}{0}}
\newcommand{\tilY}{\kerntilde{2.5}{Y}{0}}
\newcommand{\tilrho}{\kerntilde{2.5}{\rho}{0}}
\newcommand{\barM}{\kernoverline{2}{M}{-1}}
\newcommand{\barF}{\kernoverline{2.5}{F}{-1}}
\newcommand{\barS}{\kernoverline{2.5}{S}{0}}
\newcommand{\barX}{\kernoverline{2.5}{X}{0}}
\newcommand{\barY}{\kernoverline{2.5}{Y}{0}}
\newcommand{\barT}{\kernoverline{2.5}{T}{0}}
 
