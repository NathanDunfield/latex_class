%%% Setting up the fonts, including booleans storing which font is
%%% being used.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{nmd/fonts}[2014/08/31 - Semester start edition]
\RequirePackage{nmd/common}
\newboolean{nmd@times}
\newboolean{nmd@utopia}
\newboolean{nmd@lucida}
\newboolean{nmd@computermodern}
\DeclareOption{times}{\nmd@timestrue}
\DeclareOption{utopia}{\nmd@utopiatrue}
\DeclareOption{lucida}{\nmd@lucidatrue}
\DeclareOption{computermodern}{\nmd@computermoderntrue}
\ProcessOptions

%%% Other people probably don't have the Lucida fonts
\ifthen{\boolean{nmd@lucida} \and \not \boolean{nmd}}{\nmd@lucidafalse \nmd@utopiatrue}

%%% If no font is specified, infer from overall class or default to
%%% Utopia.

\ifnotthen{\boolean{nmd@times} \or \boolean{nmd@utopia} %
           \or \boolean{nmd@lucida} \or \boolean{nmd@computermodern}}%
   { \nmd@utopiatrue % Default 
     \@ifclassloaded{amsart}{\nmd@computermoderntrue \nmd@utopiafalse}{}
     \@ifclassloaded{gtpart}{\nmd@timestrue \nmd@utopiafalse}{}
   } 

\ifnmd@times
     \@ifclassloaded{gtpart}{\relax}{% 
       \usepackage{mathptmx} 
       \usepackage{mathrsfs}
     }
\fi

\ifnmd@utopia
    \usepackage{fourier} 
    \usepackage[scaled]{berasans}
\fi

\ifnmd@lucida 
   \let\digamma\undefined
   \usepackage[lucidasmallscale, nofontinfo]{lucimatx}
\fi